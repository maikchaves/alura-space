{% extends 'base.html' %}

{% load static %}

{% block content %}

<section class="galeria" style="margin-left: 5em">
    <form action="{% url 'signup' %}" method="POST">
        {% csrf_token %}
        <div class="row">
            {% for field in form.visible_fields %}
            <div class="col-12 {% if 'password' in field.name %} col-lg-6 {% else %}col-lg-12 {% endif %}" style="margin-bottom: 10px;">
                <label for="{{ field.name }}" style="color:#D9D9D9; margin-bottom: 5px;"><b>{{ field.label}}</b></label>
                {{ field }}
                {% if field.errors %}
                    <div style="color: #ff4d4f; font-size: 0.9em; margin-top: 2px;">
                    {% for error in field.errors %}
                        * {{ error }}
                    {% endfor %}
            </div>
        {% endif %}
            </div>
            {% endfor %}
           
            {% include 'partials/_messages.html' %}
            
            <div class="col-12 text-center">
                <button class="btn btn-success col-12" style="padding: top 5px;" type="submit">Criar sua conta</button>
            </div>
        </div>
        <!--<div class="row">
            
            <div class="col-12 col-lg-6" style="margin-bottom: 10px;">
                <label for="password1" style="color:#D9D9D9; margin-bottom: 5px;"><b>Senha</b></label>
                <input type="password" class="form-control" name="password1" placeholder="Digite sua senha" required>
            </div>
            <div class="col-12 col-lg-6" style="margin-bottom: 10px;">
                <label for="password2" style="color:#D9D9D9; margin-bottom: 5px;"><b>Confirmação de senha</b></label>
                <input type="password" class="form-control" name="password2" placeholder="Digite sua senha mais uma vez"
                    required>
            </div>
            <div class="col-12 text-center">
                <button class="btn btn-success col-12" style="padding: top 5px;" type="submit">Criar sua conta</button>
            </div>
        </div>-->
    </form>
</section>
</main>
</div>
</body>

<script>
function formatarTelefone(input) {
    let valor = input.value;

    // permite números, parênteses e traço
    valor = valor.replace(/[^0-9()\-\s]/g, "");

    // pega só os dígitos
    let numeros = valor.replace(/\D/g, "");

    let formatado = "";

    if (numeros.length === 0) {
        // se não tem dígitos, mas usuário digitou "(" deixa
        if (valor.startsWith("(")) {
            input.value = "(";
            return;
        } else {
            input.value = "";
            return;
        }
    }

    if (numeros.length <= 10) {
        // fixo
        formatado = numeros.replace(
            /^(\d{0,2})(\d{0,4})(\d{0,4}).*/,
            function (_, ddd, p1, p2) {
                let r = "";
                if (ddd) r = "(" + ddd;
                if (ddd.length === 2) r += ")";
                if (p1) r += p1;
                if (p2) r += "-" + p2;
                return r;
            }
        );
    } else {
        // celular
        formatado = numeros.replace(
            /^(\d{0,2})(\d{0,5})(\d{0,4}).*/,
            function (_, ddd, p1, p2) {
                let r = "";
                if (ddd) r = "(" + ddd;
                if (ddd.length === 2) r += ")";
                if (p1) r += p1;
                if (p2) r += "-" + p2;
                return r;
            }
        );
    }

    // mantém se o usuário digitou ")" manualmente
    if (valor.includes(")") && !formatado.includes(")") && numeros.length >= 2) {
        formatado = formatado.replace(/^(\(\d{2})/, "$1)");
    }

    input.value = formatado;
}
</script>





{% endblock %}